package org.omich.lang;import java.util.ArrayList;import java.util.Date;import java.util.List;import org.omich.lang.SQLite.LanguagesData;import org.omich.lang.httpClient.SmdClient;import org.omich.lang.json.JSONParser;import org.omich.lang.json.JSONWriter;import org.omich.lang.words.Language;import org.omich.lang.words.Word;import com.ccg.util.JavaString;import android.app.Service;import android.content.Intent;import android.os.IBinder;import android.util.Log;public class SyncService extends Service {                LangOmichSettings lSettings;                private LanguagesData langData;    @Override    public IBinder onBind(Intent intent) {        return null;    }    @Override    public void onCreate() {         lSettings = new LangOmichSettings(this,LangOmichActivity.SETTINGS_NAME);        langData = new LanguagesData(this);    }    @Override    public void onDestroy() {                 }    @Override    public void onStart(Intent intent, int startid) {                 SmdClient client = new SmdClient();        try{              String login = lSettings.getLogin();                String password = lSettings.getPassword();                client.auth(login, password);                                long lastConnection = lSettings.getLastConnect();                /*    List<Language> languageList = new ArrayList<Language>();                Language language = new Language("EU", -1, "41de5495-3440-42bb-b686-2b0564022029");                List<Word> wordList = new ArrayList<Word>();                Word word = new Word("времяя", "", 0, new Date().getTime());                wordList.add(word);                language.setWords(wordList);                languageList.add(language);                                String testData = JSONWriter.toJSON(lastConnection, languageList);                Log.d("test", testData);                testData = JavaString.encode(testData);              */                  String data = JSONWriter.toJSON(lastConnection, null);                data = JavaString.encode(data);                String words = JavaString.decode(client.addWords(data));                List<Language> languages =   JSONParser.parseLanguages(words);                        langData.open();                 langData.createLanguages(languages);                langData.close();                                              lastConnection = JSONParser.getLastConnection(words);                lSettings.edit();                lSettings.saveLastConnection(lastConnection);                        }catch (Exception e) {                        e.printStackTrace();                }    }}